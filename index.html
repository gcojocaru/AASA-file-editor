<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ”—</text></svg>">
    <meta name="description" content="A tool to easily update Apple App Site Association (AASA) files for Universal Links.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AASA File Updater | Universal Links Tool</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="logo">ðŸ”—</div>
    <h1>Universal Links AASA File Updater</h1>
    
    <div class="info">
        <p>This tool helps you manage URL paths in your AASA file for Universal Links. Upload your existing AASA file, select which app IDs to update, and choose an operation:</p>
        <ul style="margin-top: 10px; margin-left: 20px; list-style-type: disc;">
            <li><strong>Add URLs</strong> - Add paths to the components array</li>
            <li><strong>Remove URLs</strong> - Remove paths from the components array</li>
            <li><strong>Add Exclusions</strong> - Add paths to the "excludes" property to prevent matching</li>
        </ul>
        <p style="margin-top: 10px;">The tool automatically detects and prevents duplicate paths, ensuring your AASA file stays clean and efficient.</p>
    </div>
    
    <div class="container">
        <div class="panel">
            <h2>Input</h2>
            <div>
                <label for="aasaFile">Upload Existing AASA File:</label>
                <div class="file-input-wrapper">
                    <input type="file" id="aasaFile" accept=".json" style="display: none;">
                    <label for="aasaFile" class="file-label">Choose File</label>
                    <span id="file-name" class="file-name">No file selected</span>
                </div>
            </div>
            
            <div id="appIdSelectionContainer" style="display: none; margin-bottom: 15px;">
                <label>Select App IDs to update:</label>
                <div id="appIdCheckboxes" style="margin-top: 8px; max-height: 150px; overflow-y: auto; border: 1px solid #ddd; padding: 10px;">
                    <!-- Checkboxes will be added here dynamically -->
                </div>
                <div style="margin-top: 8px; display: flex; gap: 10px;">
                    <button type="button" id="selectAllBtn" class="small-btn">Select All</button>
                    <button type="button" id="deselectAllBtn" class="small-btn">Deselect All</button>
                </div>
            </div>
            
            <div>
                <div style="display: flex; align-items: center; margin-bottom: 10px;">
                    <label style="margin-bottom: 0; margin-right: 10px;">Operation:</label>
                    <div>
                        <label style="display: inline-flex; align-items: center; margin-right: 15px; cursor: pointer;">
                            <input type="radio" name="operation" value="add" checked style="margin-right: 5px;">
                            Add URLs
                        </label>
                        <label style="display: inline-flex; align-items: center; margin-right: 15px; cursor: pointer;">
                            <input type="radio" name="operation" value="remove" style="margin-right: 5px;">
                            Remove URLs
                        </label>
                        <label style="display: inline-flex; align-items: center; cursor: pointer;">
                            <input type="radio" name="operation" value="exclude" style="margin-right: 5px;">
                            Add Exclusions
                        </label>
                    </div>
                </div>
                <label for="urlList">Enter URLs (one per line):</label>
                <textarea id="urlList" placeholder="https://www.example.com/products/new&#10;https://www.example.com/about/team&#10;https://www.example.com/products/special" style="height: 150px;"></textarea>
            </div>
            
            <div class="btn-container">
                <button id="processBtn">Process URLs</button>
            </div>
        </div>
        
        <div class="panel">
            <h2>Output AASA File</h2>
            <div id="comparison-container" style="margin-bottom: 15px; display: none;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span>Path Changes:</span>
                    <div>
                        <span style="background-color: var(--addition-color); color: white; padding: 2px 6px; border-radius: 3px; font-size: 12px; margin-right: 5px;">Added</span>
                        <span style="background-color: var(--removal-color); color: white; padding: 2px 6px; border-radius: 3px; font-size: 12px; margin-right: 5px;">Removed</span>
                        <span style="background-color: var(--exclude-color); color: white; padding: 2px 6px; border-radius: 3px; font-size: 12px;">Excluded</span>
                    </div>
                </div>
                <div id="changes-list" style="max-height: 100px; overflow-y: auto; border: 1px solid var(--border-color); padding: 10px; border-radius: 6px; background-color: var(--input-bg); margin-bottom: 15px; font-family: monospace;">
                    <!-- Changes will be shown here -->
                </div>
            </div>
            <textarea id="outputAASA" readonly></textarea>
            <div class="btn-container">
                <button id="downloadBtn" disabled>Download AASA File</button>
            </div>
        </div>
    </div>
    
    <div id="log">Ready to update your AASA file.</div>
    
    <script src="js/script.js"></script>
</body>
</html>
